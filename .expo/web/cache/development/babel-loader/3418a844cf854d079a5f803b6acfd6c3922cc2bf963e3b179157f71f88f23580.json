{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState, useCallback } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport SectionList from \"react-native-web/dist/exports/SectionList\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { loadActivities } from \"../utils/storage\";\nimport ActivityItem from \"../components/ActivityItem\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction lastNDates(n) {\n  var res = [];\n  for (var i = 0; i < n; i++) {\n    var d = new Date();\n    d.setDate(d.getDate() - i);\n    res.push(d.toISOString().slice(0, 10));\n  }\n  return res;\n}\nexport default function HistoryScreen() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    sections = _useState2[0],\n    setSections = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    refreshing = _useState4[0],\n    setRefreshing = _useState4[1];\n  useEffect(function () {\n    load();\n  }, []);\n  var load = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var all = yield loadActivities();\n      var dates = lastNDates(7);\n      var secs = dates.map(function (dateStr) {\n        var items = all.filter(function (a) {\n          return a.dateStr === dateStr;\n        }).sort(function (a, b) {\n          return new Date(b.time) - new Date(a.time);\n        });\n        return {\n          title: new Date(dateStr).toDateString(),\n          data: items\n        };\n      }).filter(function (s) {\n        return s.data.length > 0;\n      });\n      setSections(secs);\n    });\n    return function load() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var onRefresh = useCallback(_asyncToGenerator(function* () {\n    setRefreshing(true);\n    yield load();\n    setRefreshing(false);\n  }), []);\n  return _jsxs(View, {\n    style: {\n      flex: 1,\n      padding: 12\n    },\n    children: [_jsx(Text, {\n      style: {\n        fontWeight: '700',\n        fontSize: 18,\n        marginBottom: 8\n      },\n      children: \"History (last 7 days)\"\n    }), _jsx(SectionList, {\n      sections: sections,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      renderItem: function renderItem(_ref3) {\n        var item = _ref3.item;\n        return _jsx(ActivityItem, {\n          activity: item\n        });\n      },\n      renderSectionHeader: function renderSectionHeader(_ref4) {\n        var title = _ref4.section.title;\n        return _jsx(View, {\n          style: styles.header,\n          children: _jsx(Text, {\n            style: styles.headerText,\n            children: title\n          })\n        });\n      },\n      refreshControl: _jsx(RefreshControl, {\n        refreshing: refreshing,\n        onRefresh: onRefresh\n      }),\n      ListEmptyComponent: _jsx(Text, {\n        style: {\n          marginTop: 20\n        },\n        children: \"No activities logged in last 7 days.\"\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  header: {\n    backgroundColor: '#f1f4ff',\n    padding: 8,\n    borderRadius: 6,\n    marginTop: 10\n  },\n  headerText: {\n    fontWeight: '700'\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","useCallback","View","Text","SectionList","RefreshControl","StyleSheet","loadActivities","ActivityItem","jsx","_jsx","jsxs","_jsxs","lastNDates","n","res","i","d","Date","setDate","getDate","push","toISOString","slice","HistoryScreen","_useState","_useState2","_slicedToArray","sections","setSections","_useState3","_useState4","refreshing","setRefreshing","load","_ref","_asyncToGenerator","all","dates","secs","map","dateStr","items","filter","a","sort","b","time","title","toDateString","data","s","length","apply","arguments","onRefresh","style","flex","padding","children","fontWeight","fontSize","marginBottom","keyExtractor","item","id","renderItem","_ref3","activity","renderSectionHeader","_ref4","section","styles","header","headerText","refreshControl","ListEmptyComponent","marginTop","create","backgroundColor","borderRadius"],"sources":["C:/Users/harsh/Downloads/Personal-Health-Care-Tracker/screens/HistoryScreen.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { View, Text, SectionList, RefreshControl, StyleSheet } from 'react-native';\nimport { loadActivities } from '../utils/storage';\nimport ActivityItem from '../components/ActivityItem';\n\nfunction lastNDates(n) {\n  const res = [];\n  for(let i=0;i<n;i++){\n    const d = new Date();\n    d.setDate(d.getDate() - i);\n    res.push(d.toISOString().slice(0,10));\n  }\n  return res;\n}\n\nexport default function HistoryScreen() {\n  const [sections, setSections] = useState([]);\n  const [refreshing, setRefreshing] = useState(false);\n\n  useEffect(() => { load(); }, []);\n\n  const load = async () => {\n    const all = await loadActivities();\n    const dates = lastNDates(7);\n    const secs = dates.map(dateStr => {\n      const items = all.filter(a => a.dateStr === dateStr).sort((a,b) => new Date(b.time) - new Date(a.time));\n      return { title: new Date(dateStr).toDateString(), data: items };\n    }).filter(s => s.data.length > 0);\n    setSections(secs);\n  };\n\n  const onRefresh = useCallback(async () => {\n    setRefreshing(true);\n    await load();\n    setRefreshing(false);\n  }, []);\n\n  return (\n    <View style={{flex:1, padding:12}}>\n      <Text style={{fontWeight:'700', fontSize:18, marginBottom:8}}>History (last 7 days)</Text>\n      <SectionList\n        sections={sections}\n        keyExtractor={(item) => item.id}\n        renderItem={({item}) => <ActivityItem activity={item} />}\n        renderSectionHeader={({section: {title}}) => (\n          <View style={styles.header}><Text style={styles.headerText}>{title}</Text></View>\n        )}\n        refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} />}\n        ListEmptyComponent={<Text style={{marginTop:20}}>No activities logged in last 7 days.</Text>}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  header: { backgroundColor:'#f1f4ff', padding:8, borderRadius:6, marginTop:10 },\n  headerText: { fontWeight:'700' }\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}