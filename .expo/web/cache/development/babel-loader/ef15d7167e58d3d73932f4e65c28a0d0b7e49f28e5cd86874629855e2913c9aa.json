{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SummaryCard from \"../components/SummaryCard\";\nimport { loadActivities, saveActivities } from \"../utils/storage\";\nimport { useIsFocused } from '@react-navigation/native';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar TYPES = {\n  WATER: 'water',\n  STEPS: 'steps',\n  SLEEP: 'sleep'\n};\nfunction startOfDayKey() {\n  var d = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date();\n  var y = d.getFullYear();\n  var m = d.getMonth();\n  var day = d.getDate();\n  return new Date(y, m, day).toISOString().slice(0, 10);\n}\nexport default function DashboardScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    activities = _useState2[0],\n    setActivities = _useState2[1];\n  var isFocused = useIsFocused();\n  useEffect(function () {\n    if (isFocused) load();\n  }, [isFocused]);\n  function load() {\n    return _load.apply(this, arguments);\n  }\n  function _load() {\n    _load = _asyncToGenerator(function* () {\n      var arr = yield loadActivities();\n      setActivities(arr);\n    });\n    return _load.apply(this, arguments);\n  }\n  function sumToday(type) {\n    var todayKey = startOfDayKey();\n    var filtered = activities.filter(function (a) {\n      return a.dateStr === todayKey && a.type === type;\n    });\n    if (type === TYPES.WATER) {\n      return filtered.reduce(function (s, a) {\n        return s + Number(a.value);\n      }, 0) || 0;\n    }\n    if (type === TYPES.STEPS) {\n      return filtered.reduce(function (s, a) {\n        return s + Number(a.value);\n      }, 0) || 0;\n    }\n    if (type === TYPES.SLEEP) {\n      return filtered.reduce(function (s, a) {\n        return s + Number(a.value);\n      }, 0) || 0;\n    }\n    return 0;\n  }\n  return _jsxs(View, {\n    style: {\n      flex: 1,\n      padding: 16,\n      backgroundColor: '#f3f6ff'\n    },\n    children: [_jsx(Text, {\n      style: {\n        fontSize: 18,\n        fontWeight: '700',\n        marginBottom: 6\n      },\n      children: new Date().toDateString()\n    }), _jsxs(ScrollView, {\n      contentContainerStyle: {\n        paddingBottom: 20\n      },\n      children: [_jsxs(View, {\n        style: {\n          flexDirection: 'row',\n          gap: 10\n        },\n        children: [_jsx(SummaryCard, {\n          title: \"Water\",\n          value: sumToday(TYPES.WATER),\n          unit: \"glasses\",\n          onPress: function onPress() {\n            return navigation.navigate('LogActivity', {\n              prefill: TYPES.WATER\n            });\n          }\n        }), _jsx(SummaryCard, {\n          title: \"Steps\",\n          value: sumToday(TYPES.STEPS),\n          unit: \"steps\",\n          onPress: function onPress() {\n            return navigation.navigate('LogActivity', {\n              prefill: TYPES.STEPS\n            });\n          }\n        })]\n      }), _jsx(View, {\n        style: {\n          marginTop: 8\n        },\n        children: _jsx(SummaryCard, {\n          title: \"Sleep\",\n          value: sumToday(TYPES.SLEEP),\n          unit: \"hrs\",\n          onPress: function onPress() {\n            return navigation.navigate('LogActivity', {\n              prefill: TYPES.SLEEP\n            });\n          }\n        })\n      }), _jsxs(View, {\n        style: {\n          flexDirection: 'row',\n          marginTop: 16,\n          justifyContent: 'space-between'\n        },\n        children: [_jsx(TouchableOpacity, {\n          style: styles.quickBtn,\n          onPress: function onPress() {\n            return navigation.navigate('LogActivity', {\n              prefill: TYPES.WATER\n            });\n          },\n          children: _jsx(Text, {\n            children: \"+ Water\"\n          })\n        }), _jsx(TouchableOpacity, {\n          style: styles.quickBtn,\n          onPress: function onPress() {\n            return navigation.navigate('LogActivity', {\n              prefill: TYPES.STEPS\n            });\n          },\n          children: _jsx(Text, {\n            children: \"+ Steps\"\n          })\n        }), _jsx(TouchableOpacity, {\n          style: styles.quickBtn,\n          onPress: function onPress() {\n            return navigation.navigate('LogActivity', {\n              prefill: TYPES.SLEEP\n            });\n          },\n          children: _jsx(Text, {\n            children: \"+ Sleep\"\n          })\n        }), _jsx(TouchableOpacity, {\n          style: styles.quickBtn,\n          onPress: function onPress() {\n            return navigation.navigate('History');\n          },\n          children: _jsx(Text, {\n            children: \"History\"\n          })\n        })]\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  quickBtn: {\n    backgroundColor: '#fff',\n    padding: 10,\n    borderRadius: 8,\n    elevation: 1,\n    width: 80,\n    alignItems: 'center'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","Text","StyleSheet","ScrollView","TouchableOpacity","SummaryCard","loadActivities","saveActivities","useIsFocused","jsx","_jsx","jsxs","_jsxs","TYPES","WATER","STEPS","SLEEP","startOfDayKey","d","arguments","length","undefined","Date","y","getFullYear","m","getMonth","day","getDate","toISOString","slice","DashboardScreen","_ref","navigation","_useState","_useState2","_slicedToArray","activities","setActivities","isFocused","load","_load","apply","_asyncToGenerator","arr","sumToday","type","todayKey","filtered","filter","a","dateStr","reduce","s","Number","value","style","flex","padding","backgroundColor","children","fontSize","fontWeight","marginBottom","toDateString","contentContainerStyle","paddingBottom","flexDirection","gap","title","unit","onPress","navigate","prefill","marginTop","justifyContent","styles","quickBtn","create","borderRadius","elevation","width","alignItems"],"sources":["C:/Users/harsh/Downloads/Personal-Health-Care-Tracker/screens/DashboardScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, ScrollView, TouchableOpacity } from 'react-native';\nimport SummaryCard from '../components/SummaryCard';\nimport { loadActivities, saveActivities } from '../utils/storage';\nimport { useIsFocused } from '@react-navigation/native';\n\nconst TYPES = { WATER: 'water', STEPS: 'steps', SLEEP: 'sleep' };\n\nfunction startOfDayKey(d = new Date()) {\n  const y = d.getFullYear(); const m = d.getMonth(); const day = d.getDate();\n  return new Date(y, m, day).toISOString().slice(0,10);\n}\n\nexport default function DashboardScreen({ navigation }) {\n  const [activities, setActivities] = useState([]);\n  const isFocused = useIsFocused();\n\n  useEffect(() => {\n    if(isFocused) load();\n  }, [isFocused]);\n\n  async function load() {\n    const arr = await loadActivities();\n    setActivities(arr);\n  }\n\n  function sumToday(type) {\n    const todayKey = startOfDayKey();\n    const filtered = activities.filter(a => a.dateStr === todayKey && a.type === type);\n    if(type === TYPES.WATER) {\n      // value is number of glasses\n      return filtered.reduce((s, a) => s + Number(a.value), 0) || 0;\n    }\n    if(type === TYPES.STEPS) {\n      return filtered.reduce((s, a) => s + Number(a.value), 0) || 0;\n    }\n    if(type === TYPES.SLEEP) {\n      // store hours\n      return filtered.reduce((s, a) => s + Number(a.value), 0) || 0;\n    }\n    return 0;\n  }\n\n  return (\n    <View style={{flex:1, padding:16, backgroundColor:'#f3f6ff'}}>\n      <Text style={{fontSize:18, fontWeight:'700', marginBottom:6}}>{new Date().toDateString()}</Text>\n\n      <ScrollView contentContainerStyle={{paddingBottom:20}}>\n        <View style={{flexDirection:'row', gap:10}}>\n          <SummaryCard title=\"Water\" value={sumToday(TYPES.WATER)} unit=\"glasses\" onPress={() => navigation.navigate('LogActivity', { prefill: TYPES.WATER })} />\n          <SummaryCard title=\"Steps\" value={sumToday(TYPES.STEPS)} unit=\"steps\" onPress={() => navigation.navigate('LogActivity', { prefill: TYPES.STEPS })} />\n        </View>\n\n        <View style={{marginTop:8}}>\n          <SummaryCard title=\"Sleep\" value={sumToday(TYPES.SLEEP)} unit=\"hrs\" onPress={() => navigation.navigate('LogActivity', { prefill: TYPES.SLEEP })} />\n        </View>\n\n        {/* Quick action buttons */}\n        <View style={{flexDirection:'row', marginTop:16, justifyContent:'space-between'}}>\n          <TouchableOpacity style={styles.quickBtn} onPress={() => navigation.navigate('LogActivity', { prefill: TYPES.WATER })}>\n            <Text>+ Water</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.quickBtn} onPress={() => navigation.navigate('LogActivity', { prefill: TYPES.STEPS })}>\n            <Text>+ Steps</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.quickBtn} onPress={() => navigation.navigate('LogActivity', { prefill: TYPES.SLEEP })}>\n            <Text>+ Sleep</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.quickBtn} onPress={() => navigation.navigate('History')}>\n            <Text>History</Text>\n          </TouchableOpacity>\n        </View>\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  quickBtn: { backgroundColor:'#fff', padding:10, borderRadius:8, elevation:1, width:80, alignItems:'center' }\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}